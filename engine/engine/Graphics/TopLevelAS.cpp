#include "engine/pch.h"
#include "TopLevelAS.hpp"

////////////////////////////////////////////////////////////////
//////////////////////////// Define ////////////////////////////
////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////
//////////////////////////// Static ////////////////////////////
////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////
/////////////////////// Standalone Function ////////////////////
////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////
///////////////////////// Member Function //////////////////////
////////////////////////////////////////////////////////////////
uint TopLevelAS::AddInstance( const Mesh& blas, uint8_t instanceMask, const mat44& transform )
{
   uint instanceId = (uint)mInstances.size();
   ASSERT_DIE( ((~((1u << 24) - 1u)) & instanceId) == 0u );
   mInstances.push_back( { &blas, instanceId, instanceMask, transform } );
   return instanceId;
}