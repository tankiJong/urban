#include "engine/pch.h"
#include "Camera.hpp"

////////////////////////////////////////////////////////////////
//////////////////////////// Define ////////////////////////////
////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////
//////////////////////////// Static ////////////////////////////
////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////
/////////////////////// Standalone Function /////////////////////
////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////
///////////////////////// Member Function //////////////////////
////////////////////////////////////////////////////////////////

camera_t Camera::ComputeCameraBlock() const {
   camera_t cbo;

   cbo.view = mTransform.WorldToLocal();
   cbo.proj = mProjection;
   cbo.invView = mTransform.LocalToWorld();
   cbo.invProj = cbo.proj.Inverse();
   
   return cbo;
}

void Camera::LookAt( const float3& position, const float3& target, const float3& up ) {
   mat44 look = mat44::LookAt(position, target, up);
   mTransform.SetFromWorldTransform(look);
}